(function(e){function t(t){for(var n,l,o=t[0],r=t[1],c=t[2],d=0,p=[];d<o.length;d++)l=o[d],s[l]&&p.push(s[l][0]),s[l]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var r=a[o];0!==s[r]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},s={app:0},i=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=r;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2856:function(e,t,a){},"3a42":function(e,t,a){"use strict";var n=a("6d90"),s=a.n(n);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.isPending?a("div",{staticClass:"preloader"},[a("div",{staticClass:"preloader__spinner"})]):e._e(),a("button",{on:{click:function(t){t.preventDefault(),e.setPopupState(!0)}}},[e._v("Добавить таблицу")]),e.popupState?a("popup",{on:{close:function(t){e.setPopupState(!1)}}},[a("add-table",{on:{created:function(t){e.setPopupState(!1)}}})],1):e._e(),e._l(e.tablesList,function(e,t){return a("table-component",{key:t,attrs:{table:e,tableIndex:t}})})],2)},i=[],l=a("c93e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[e.popupState?a("popup",{on:{close:function(t){e.setPopupState(!1)}}},[a("copy-restore-table",{attrs:{cols:e.tableData.values,table:e.tableIndex},on:{restored:e.dataRestored}})],1):e._e(),a("div",{staticClass:"table__top"},[a("table-filter",{attrs:{rows:e.tableData.rows},on:{search:e.handleSearch,clear:e.clearSearch}}),a("div",{staticClass:"table__controls"},[a("button",{on:{click:function(t){t.preventDefault(),e.setPopupState(!0)}}},[e._v("Скопировать / восстановить")])])],1),a("table",{staticClass:"table__elem"},[a("thead",[a("th",{staticClass:"table__th _add",class:e.setCustomTh}),e._l(e.tableData.rows,function(t,n){return a("th",{key:n,staticClass:"table__th",class:e.setCustomTh,on:{click:function(a){a.preventDefault(),e.handleSort(t)}}},[e._v("\n        "+e._s(t)+"\n        "),e.sorting.field==t?a("span",[e._v("\n          "+e._s(e.rowDirection)+"\n        ")]):e._e()])})],2),a("tbody",e._l(e.getTableValuesPerPage(e.tableData.values,e.tableData.page),function(t,n){return a("tr",{key:n,staticClass:"table__tr"},[a("td",{staticClass:"table__td",class:e.setCustomTd(t)},[a("a",{staticClass:"table__add-col",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.addColumn(n)}}},[e._v("+")])]),e._l(t,function(s,i){return a("td",{key:i,staticClass:"table__td",class:e.setCustomTd(t),on:{dblclick:function(a){e.openEdit(n,i,t)}}},[e.checkIfColumnEditable(n,i)?a("input",{directives:[{name:"model",rawName:"v-model",value:e.edit.value,expression:"edit.value"}],attrs:{type:"text"},domProps:{value:e.edit.value},on:{keyup:[function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.cancelEdit(t):null},function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;a.preventDefault(),e.saveEdit(n,i,t)}],blur:function(a){a.preventDefault(),e.saveEdit(n,i,t)},input:function(t){t.target.composing||e.$set(e.edit,"value",t.target.value)}}}):[e._v("\n            "+e._s(e.checkTypeOfValue(s))+"\n          ")]],2)})],2)}))]),a("div",{staticClass:"table__bottom"},[a("div",{staticClass:"table__pagination"},e._l(e.getPagesCount(e.tableData.values),function(t){return a("div",{key:t,staticClass:"table__page",class:e.checkActivePage(t),on:{click:function(a){a.preventDefault(),e.handleSetPage(t)}}},[e._v("\n        "+e._s(t)+"\n      ")])})),a("div",{staticClass:"table__controls"},[a("button",{on:{click:function(t){return t.preventDefault(),e.handleCleanTable(t)}}},[e._v("Очистить таблицу")]),a("button",{on:{click:function(t){return t.preventDefault(),e.handleDeleteTable(t)}}},[e._v("Удалить таблицу")])])])],1)},r=[],c=(a("f751"),a("386d"),a("6762"),a("2fdb"),a("6b54"),a("456d"),a("6bde")),u=(a("ac6a"),a("2f62")),d=a("2ef0"),p=a.n(d),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table__filter filter"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"filter__search",attrs:{type:"text",placeholder:"Поиск"},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},e.handleInputSearch],keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.initSearch(t):null}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:e.rowName,expression:"rowName"}],staticClass:"filter__select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.rowName=t.target.multiple?a:a[0]}}},e._l(e.rows,function(t,n){return a("option",{key:n},[e._v("\n      "+e._s(t)+"\n    ")])})),a("a",{staticClass:"filter__reset",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.clearSearch(t)}}},[e._v("Сбросить поиск")])])},b=[],v={name:"table-filter",props:["rows"],data:function(){return{rowName:null,search:null}},methods:{handleInputSearch:p.a.debounce(function(){this.initSearch()},300),initSearch:function(){var e={search:this.removeWhitespace(this.search),row:this.rowName};this.$emit("search",e)},removeWhitespace:function(e){return e.trim()},clearSearch:function(){this.$emit("clear")}},mounted:function(){var e=this;this.rows&&this.$nextTick(function(){e.rowName=e.rows[0]})}},h=v,m=(a("5c63"),a("2877")),_=Object(m["a"])(h,f,b,!1,null,"624c22f9",null);_.options.__file="TableFilter.vue";var g=_.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popup"},[a("div",{staticClass:"popup__elem"},[a("div",{staticClass:"popup__close",on:{click:e.handleClosePopup}}),e._t("default")],2)])},T=[],y={name:"popup",methods:{handleClosePopup:function(){this.$emit("close")}}},C=y,S=(a("8160"),Object(m["a"])(C,w,T,!1,null,null,null));S.options.__file="Popup.vue";var x=S.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.json,expression:"json"}],staticClass:"textarea js-table-json",domProps:{value:e.json},on:{input:function(t){t.target.composing||(e.json=t.target.value)}}}),e.error?a("div",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),a("div",[a("button",{on:{click:function(t){return t.preventDefault(),e.copyJSON(t)}}},[e._v("Скопировать")]),a("button",{on:{click:function(t){return t.preventDefault(),e.handleRestoreTable(t)}}},[e._v("Восстановить")])])])},O=[],P={name:"copy-restore-table",props:["cols","table"],data:function(){return{json:null,error:null}},computed:{colsJSON:function(){return JSON.stringify(this.cols)}},methods:Object(l["a"])({},Object(u["d"])({restoreTable:"restoreTable"}),{copyJSON:function(){var e=document.querySelector(".js-table-json");e.select(),document.execCommand("copy"),window.getSelection().removeAllRanges()},handleRestoreTable:function(){var e={table:this.table,values:this.json};try{JSON.parse(this.json)}catch(e){return console.error("Ошибка: невалидный json"),this.error="Ошибка: невалидный json",!1}this.restoreTable(e),this.$emit("restored")}}),mounted:function(){var e=this;this.$nextTick(function(){e.json=JSON.stringify(e.cols)})}},k=P,N=(a("c46b"),Object(m["a"])(k,j,O,!1,null,null,null));N.options.__file="CopyRestoreTable.vue";var D=N.exports,E={name:"table-component",components:{TableFilter:g,Popup:x,CopyRestoreTable:D},props:["table","tableIndex"],data:function(){return{tableData:{isPending:!1,values:[],errors:[],page:1,rows:[]},sorting:{direction:"normal",field:null,values:["asc","desc","normal"],valuesSymbols:["⇈","⇊",""],initialState:[]},edit:{column:null,row:null,value:null},editStatus:!1,isFiltered:!1,popupState:!1}},computed:{rowDirection:function(){return this.sorting.valuesSymbols[this.sorting.values.indexOf(this.sorting.direction)]},setCustomTh:function(){return this.table.meta[0]?this.table.meta[0]:""}},methods:Object(l["a"])({},Object(u["d"])({addNewColumn:"addNewColumn",saveNewValue:"saveNewValue",cleanTable:"cleanTable",deleteTable:"deleteTable"}),{setCustomTd:function(e){return e%2==0?this.table.meta[1]?this.table.meta[1]:"":this.table.meta[2]?this.table.meta[2]:""},checkTypeOfValue:function(e){return"object"==Object(c["a"])(e)?Object.keys(e).map(function(t){return e[t]}).join(", "):e},checkActivePage:function(e){if(e==this.tableData.page)return"_active"},getTableValuesPerPage:function(e,t){var a=10*(t-1),n=a+10;return e.slice(a,n)},getPagesCount:function(e){return Math.ceil(e.length/10)},handleSetPage:function(e){this.tableData.page=e},handleSort:function(e){if(this.sorting.field!=e)this.sorting.field=e,this.sorting.direction="asc";else{var t=this.sorting.values.indexOf(this.sorting.direction),a=this.sorting.values,n=a[t+1];this.sorting.direction=n||a[0]}"normal"===this.sorting.direction?this.tableData.values=this.isFiltered?this.sorting.initialState:this.table.values:this.tableData.values=p.a.orderBy(this.tableData.values,e,this.sorting.direction)},handleSearch:function(e){this.isFiltered=!0;var t=this.table.values.filter(function(t){var a=t[e.row].toString();return a.includes(e.search)});this.sorting.initialState=t,this.tableData.values=t},clearSearch:function(){this.tableData.values=this.table.values,this.isFiltered=!1},addColumn:function(e){var t={};this.table.rows.forEach(function(e){t[e]=""});var a={table:this.tableIndex,column:e,element:t,page:this.tableData.page};this.addNewColumn(a)},checkIfColumnEditable:function(e,t){return this.edit.row==e&&this.edit.column==t},openEdit:function(e,t,a){var n=this.isFiltered?this.table.values.indexOf(a):e;this.edit.row=e,this.edit.column=t,this.edit.value=this.table.values[n][t],this.editStatus=!0},clearEdit:function(){for(var e in this.edit)this.edit[e]=null;this.editStatus=!1},cancelEdit:function(){this.clearEdit()},saveEdit:function(e,t,a){this.isFiltered&&(e=this.table.values.indexOf(a));var n={table:this.tableIndex,row:e,column:t,newValue:this.edit.value};this.editStatus&&(this.saveNewValue(n),this.clearEdit())},handleCleanTable:function(){this.tableData.values=[],this.cleanTable(this.tableIndex)},handleDeleteTable:function(){this.deleteTable(this.tableIndex)},setPopupState:function(e){this.popupState=e},copyToTableData:function(){var e=Object.assign({},this.table);this.tableData=e},dataRestored:function(){this.copyToTableData(),this.popupState=!1}}),mounted:function(){this.copyToTableData()}},$=E,I=(a("a48f"),Object(m["a"])($,o,r,!1,null,"06aa168e",null));I.options.__file="Table.vue";var V=I.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("div",{staticClass:"add__elem"},[a("label",{attrs:{for:"id_fields"}},[e._v("Название столбцов таблицы (через запятую)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fields,expression:"fields"}],staticClass:"add__input",attrs:{type:"text",id:"id_fields"},domProps:{value:e.fields},on:{input:function(t){t.target.composing||(e.fields=t.target.value)}}})]),a("div",{staticClass:"add__elem"},[a("label",{attrs:{for:"id_cols"}},[e._v("Количество сток в таблице")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.cols,expression:"cols"}],staticClass:"add__input",attrs:{type:"number",id:"id_cols",min:"1"},domProps:{value:e.cols},on:{input:function(t){t.target.composing||(e.cols=t.target.value)}}})]),a("div",{staticClass:"add__elem"},[a("label",{attrs:{for:"id_meta"}},[e._v("Три класса для стилизации заголовка, четной строки и нечетной строки (через запятую)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.meta,expression:"meta"}],staticClass:"add__input",attrs:{type:"text",id:"id_meta"},domProps:{value:e.meta},on:{input:function(t){t.target.composing||(e.meta=t.target.value)}}})]),a("button",{on:{click:function(t){return t.preventDefault(),e.handleAddTable(t)}}},[e._v("Добавить таблицу")])])},J=[],F={name:"add-table",data:function(){return{fields:null,cols:1,meta:"custom-th, td-even, td-odd"}},methods:Object(l["a"])({},Object(u["d"])({addEmptyTable:"addEmptyTable"}),Object(u["b"])({addNewTable:"addNewTable"}),{handleAddTable:function(){if(this.fields){var e={fields:this.fields,cols:this.cols,meta:this.meta};this.addEmptyTable(e)}else this.addNewTable();this.$emit("created")}})},R=F,M=(a("3a42"),Object(m["a"])(R,A,J,!1,null,null,null));M.options.__file="AddTable.vue";var B=M.exports,L={name:"app",components:{TableComponent:V,Popup:x,AddTable:B},data:function(){return{popupState:!1}},computed:Object(l["a"])({},Object(u["c"])({tablesList:"getTablesList",isPending:"appIsPending"})),methods:{setPopupState:function(e){this.popupState=e}}},q=L,W=(a("5c0b"),Object(m["a"])(q,s,i,!1,null,null,null));W.options.__file="App.vue";var z=W.exports,G=(a("c5f6"),a("a481"),a("28a5"),a("bc3a")),H=a.n(G);n["a"].use(u["a"]);var K=new u["a"].Store({state:{tablesBlueprint:{values:[],errors:[],page:1,rows:[],meta:[]},tables:[],isPending:!1},getters:{getTablesList:function(e){return e.tables},appIsPending:function(e){return e.isPending}},mutations:{addNewTable:function(e){e.isPending=!0},addNewTableSuccess:function(e,t){var a=Object.assign({},e.tablesBlueprint);a.values=t,a.isPending=!1,a.rows=Object.keys(t[0]),e.tables.push(a),e.isPending=!1},addNewTableError:function(e,t){e.tables[e.tables.length-1].error=t,e.isPending=!1},addNewColumn:function(e,t){var a=t.column+1+10*(t.page-1);e.tables[t.table].values.splice(a,0,t.element)},saveNewValue:function(e,t){e.tables[t.table].values[t.row][t.column]=t.newValue},cleanTable:function(e,t){e.tables[t].values=[]},deleteTable:function(e,t){e.tables.splice(t,1)},restoreTable:function(e,t){var a=JSON.parse(t.values);p.a.isEqual(e.tables[t.table].rows,Object.keys(a[0]))||(e.tables[t.table].rows=Object.keys(a[0])),e.tables[t.table].values=a},addEmptyTable:function(e,t){for(var a=t.fields.replace(/\s/g,"").split(","),n=[],s=function(e){var t={};a.forEach(function(e){t[e]=""}),n.push(t)},i=0;i<Number(t.cols);i++)s(i);var l=Object.assign({},e.tablesBlueprint);l.rows=a,l.values=n,l.meta=t.meta?t.meta.replace(/\s/g,"").split(","):[],e.tables.push(l)}},actions:{addNewTable:function(e){e.commit("addNewTable"),H.a.get("http://www.filltext.com/?rows=100&id={number|1000}&firstName={firstName}&lastName={lastName}&email={email}&phone={phone|(xxx)xxx-xx-xx}&adress={addressObject}&description={lorem|32};").then(function(t){e.commit("addNewTableSuccess",t.data)}).catch(function(t){return Promise.reject(e.commit("addNewTableError",t))})}}});n["a"].config.productionTip=!1,new n["a"]({store:K,render:function(e){return e(z)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("2856"),s=a.n(n);s.a},"5c63":function(e,t,a){"use strict";var n=a("f486"),s=a.n(n);s.a},"6d90":function(e,t,a){},8018:function(e,t,a){},8160:function(e,t,a){"use strict";var n=a("dc40"),s=a.n(n);s.a},a48f:function(e,t,a){"use strict";var n=a("c8eb"),s=a.n(n);s.a},c46b:function(e,t,a){"use strict";var n=a("8018"),s=a.n(n);s.a},c8eb:function(e,t,a){},dc40:function(e,t,a){},f486:function(e,t,a){}});
//# sourceMappingURL=app.b0beca31.js.map